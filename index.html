<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¿¡ç”¨å¡å›é¥‹ç¥éšŠå‹ (å¥¶æ²¹ç‰ˆ)</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700;800&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* å¥¶æ²¹ä¸»é¡Œé…è‰²å®šç¾© */
        :root {
            --cream-bg: #FDFBF7; /* æ•´é«”èƒŒæ™¯ï¼šæ¥µæ·ºå¥¶æ²¹è‰² */
            --cream-darker: #F3EFE5; /* æœå°‹æ¬„èƒŒæ™¯ï¼šç¨æ·±å¥¶æ²¹è‰² */
            --warm-text: #5D4037; /* æº«æš–çš„æ·±æ£•è‰²æ–‡å­—ï¼Œå–ä»£ç´”é»‘ */
            --highlight-gold: #FFC107; /* é‡‘é»ƒè‰²å¼·èª¿ */
        }
        body { font-family: 'Nunito Sans', 'Noto Sans TC', sans-serif; background-color: var(--cream-bg); color: var(--warm-text); }
        
        /* éš±è—æ²è»¸ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* éå ´å‹•ç•« */
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }

        /* å¼·èª¿æ•¸å­—çš„ç‰¹æ®Šå­—é«” */
        .rate-number { font-family: 'Nunito Sans', sans-serif; }
    </style>
</head>
<body class="h-screen flex flex-col">

    <div id="app" class="flex flex-col h-full max-w-md mx-auto bg-[var(--cream-bg)] shadow-2xl overflow-hidden relative">
        
        <header class="bg-gradient-to-r from-amber-300 to-orange-400 py-6 px-6 shadow-md z-10">
            <h1 class="text-2xl font-extrabold tracking-wide text-white drop-shadow-sm"><i class="fa-solid fa-credit-card mr-2"></i>å›é¥‹ç¥éšŠå‹</h1>
            <p class="text-amber-50 text-sm mt-1 font-medium">å°æ–°å¤ªé™½ x å¯Œé‚¦ J x åœ‹æ³° Cube</p>
        </header>

        <div class="p-4 bg-[var(--cream-darker)] border-b border-orange-100 z-10 sticky top-0">
            <div class="relative shadow-sm rounded-xl">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-3.5 text-amber-400"></i>
                <input 
                    v-model="searchQuery" 
                    @input="handleInput"
                    type="text" 
                    placeholder="è¼¸å…¥åº—å®¶ã€åœ‹å®¶ (ä¾‹: æ—¥æœ¬, Uniqlo)" 
                    class="w-full pl-11 pr-10 py-3 rounded-xl bg-white border-2 border-transparent focus:border-amber-300 focus:ring-0 transition-all text-lg outline-none placeholder-gray-400 text-[var(--warm-text)]"
                >
                <button v-if="searchQuery" @click="clearSearch" class="absolute right-3 top-2.5 text-gray-300 p-1 hover:text-gray-500">
                    <i class="fa-solid fa-circle-xmark text-xl"></i>
                </button>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto hide-scrollbar p-4 relative bg-[var(--cream-bg)]">
            
            <div v-if="!searchQuery && !selectedMerchant" class="mt-2">
                <h3 class="text-sm font-bold text-amber-600/70 uppercase tracking-wider mb-3 ml-1">ğŸ’¡ å¿«é€ŸæŸ¥æ‰¾</h3>
                <div class="flex flex-wrap gap-2">
                    <button v-for="tag in popularSearches" @click="quickSearch(tag)" class="px-4 py-2 bg-white border border-orange-100 rounded-full text-[var(--warm-text)] text-sm font-bold shadow-sm hover:bg-amber-50 hover:border-amber-200 transition active:scale-95">
                        {{ tag }}
                    </button>
                </div>
                
                <div class="mt-16 text-center opacity-30">
                    <i class="fa-solid fa-store text-7xl mb-4 text-amber-800"></i>
                    <p class="text-lg font-medium">æº–å‚™å¥½è¦åˆ·å“ªè£¡äº†å—ï¼Ÿ</p>
                </div>
            </div>

            <div v-if="searchQuery && !selectedMerchant" class="space-y-3">
                <div v-for="m in filteredMerchants" :key="m.name" @click="selectMerchant(m)" 
                     class="bg-white p-4 rounded-2xl border-2 border-orange-50 shadow-[0_2px_8px_-2px_rgba(251,191,36,0.15)] hover:border-amber-300 hover:shadow-md transition-all cursor-pointer flex justify-between items-center group">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl transition-colors" 
                             :class="m.category.includes('åœ‹å¤–') ? 'bg-blue-100 text-blue-500 group-hover:bg-blue-500 group-hover:text-white' : 'bg-amber-100 text-amber-600 group-hover:bg-amber-500 group-hover:text-white'">
                            <i v-if="m.category.includes('åœ‹å¤–')" class="fa-solid fa-plane-departure"></i>
                            <i v-else class="fa-solid fa-shop"></i>
                        </div>
                        <span class="font-bold text-[19px] text-[var(--warm-text)]">{{ m.name }}</span>
                    </div>
                    <i class="fa-solid fa-chevron-right text-orange-200 group-hover:text-amber-500"></i>
                </div>
                
                <div v-if="filteredMerchants.length === 0" class="text-center mt-10 text-gray-400">
                    <p>æ‰¾ä¸åˆ°ã€Œ{{ searchQuery }}ã€çš„è³‡æ–™</p>
                </div>
            </div>

            <transition name="fade">
                <div v-if="selectedMerchant">
                    <button @click="backToSearch" class="mb-4 flex items-center text-amber-700/70 hover:text-amber-800 transition text-sm font-bold bg-amber-100/50 px-3 py-2 rounded-lg">
                        <i class="fa-solid fa-arrow-left mr-2"></i> è¿”å›æœå°‹
                    </button>

                    <div class="mb-6 bg-white p-5 rounded-3xl shadow-sm border border-orange-100 text-center relative overflow-hidden">
                        <div class="absolute -top-6 -right-6 text-amber-50 text-9xl opacity-50">
                            <i v-if="selectedMerchant.category.includes('åœ‹å¤–')" class="fa-solid fa-earth-asia"></i>
                            <i v-else class="fa-solid fa-bag-shopping"></i>
                        </div>
                        <h2 class="text-2xl font-extrabold text-[var(--warm-text)] relative z-10">{{ selectedMerchant.name }}</h2>
                        <span class="inline-block mt-2 px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-bold relative z-10">
                            {{ selectedMerchant.category }}
                        </span>
                    </div>

                    <div class="space-y-4 pb-10">
                        <div v-for="(card, index) in sortedRewards" :key="index" 
                             class="bg-white rounded-2xl p-5 shadow-[0_4px_12px_-4px_rgba(0,0,0,0.1)] border-l-[6px] relative overflow-hidden transition-transform transform hover:-translate-y-1"
                             :class="getCardColorClass(card.cardName)">
                            
                            <div v-if="index === 0" class="absolute top-0 right-0 bg-gradient-to-r from-yellow-400 to-amber-500 text-white text-xs font-bold px-3 py-1 rounded-bl-xl shadow-sm">
                                <i class="fa-solid fa-crown mr-1"></i>é¦–é¸æ¨è–¦
                            </div>

                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-lg flex items-center" :class="getTextColorClass(card.cardName)">
                                        <i v-if="card.cardName.includes('Cube')" class="fa-solid fa-cube mr-2 opacity-80"></i>
                                        <i v-if="card.cardName.includes('å°æ–°')" class="fa-solid fa-sun mr-2 opacity-80"></i>
                                        <i v-if="card.cardName.includes('å¯Œé‚¦')" class="fa-brands fa-line mr-2 opacity-80"></i>
                                        {{ card.cardName }}
                                    </h3>
                                    
                                    <div class="mt-3 flex flex-wrap gap-2 items-start">
                                        <span class="inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200">
                                            <i class="fa-solid fa-sliders mr-1.5 text-gray-400"></i>
                                            {{ card.plan }}
                                        </span>
                                        <span class="inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-bold" 
                                              :class="getMethodTagClass(card.method)">
                                            <i class="fa-solid fa-wallet mr-1.5 opacity-70"></i>
                                            {{ card.method }}
                                        </span>
                                    </div>
                                </div>

                                <div class="text-right pl-2">
                                    <div class="rate-number text-[2.75rem] leading-none font-black tracking-tighter drop-shadow-sm" :class="getRateColorClass(card.cardName)">
                                        {{ card.rate }}<span class="text-2xl ml-0.5">%</span>
                                    </div>
                                    <p v-if="selectedMerchant.category.includes('åœ‹å¤–')" class="text-[10px] text-gray-400 mt-1 font-medium">
                                        (æœªæ‰£é™¤1.5%æ‰‹çºŒè²»)
                                    </p>
                                    <p v-else class="text-xs text-gray-400 mt-1 font-medium">å›é¥‹ç‡</p>
                                </div>
                            </div>
                            
                            <div v-if="card.note" class="mt-4 pt-3 border-t border-dashed border-gray-200 text-xs text-gray-500 flex items-start bg-orange-50/50 -mx-5 -mb-5 p-4">
                                <i class="fa-solid fa-circle-exclamation mt-0.5 mr-2 text-amber-500"></i>
                                <span class="font-medium">{{ card.note }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>

        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    searchQuery: '',
                    selectedMerchant: null,
                    // æ–°å¢ã€Œæ—¥æœ¬ã€ã€ã€Œåœ‹å¤–ã€åˆ°ç†±é–€æœå°‹
                    popularSearches: ['æ—¥æœ¬', 'åœ‹å¤–', '7-11', 'éº¥ç•¶å‹', 'Uniqlo', 'é«˜éµ', 'Uber Eats'],
                    
                    merchants: [
                        // ==========================================
                        // æ–°å¢ï¼šåœ‹å¤–æ¶ˆè²»å°ˆå€
                        // ==========================================
                        {
                            name: "ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡· æ—¥æœ¬/éŸ“åœ‹å¯¦é«”æ¶ˆè²»",
                            category: "åœ‹å¤–æ—…éŠ(é«˜å›é¥‹å€)",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "æ—¥éŸ“æ—…éŠ", method: "ç•¶åœ°å¯¦é«”åˆ·å¡", rate: 3.0, note: "åƒ…é™ç•¶åœ°å¯¦é«”åº—é¢ï¼Œç¶å®šæ”¯ä»˜(å¦‚Suicaå„²å€¼)å¯èƒ½ç„¡é«˜å›é¥‹ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "å¯¦é«”å¡", rate: 3.0, note: "è«‹å‹™å¿…åˆ‡æ›è‡³[è¶£æ—…è¡Œ]æ–¹æ¡ˆã€‚éœ€æ‰£é™¤1.5%æ‰‹çºŒè²»ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "æµ·å¤–æ¶ˆè²»æ´»å‹•", method: "å¯¦é«”å¡", rate: 2.5, note: "ä¾ç•¶æœŸæ´»å‹•è€Œå®šï¼Œé€šå¸¸éœ€ç™»éŒ„ã€‚éœ€æ‰£é™¤1.5%æ‰‹çºŒè²»ã€‚" }
                            ]
                        },
                        {
                            name: "ğŸŒ åœ‹å¤–ä¸€èˆ¬æ¶ˆè²» (æ­ç¾/ç¶²è³¼)",
                            category: "åœ‹å¤–æ—…éŠ(ä¸€èˆ¬å€)",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "ä¸é™(å«ç¶²è³¼)", rate: 3.0, note: "åŒ…å«åœ‹å¤–ç¶²ç«™(å¦‚Amazon, Agoda)ã€‚éœ€åˆ‡æ›è‡³[è¶£æ—…è¡Œ]ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "æµ·å¤–æ¶ˆè²»æ´»å‹•", method: "ä¸é™", rate: 2.5, note: "ä¾ç•¶æœŸæ´»å‹•è€Œå®šã€‚éœ€æ‰£é™¤æµ·å¤–æ‰‹çºŒè²»ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬æ¶ˆè²»", method: "ä¸é™", rate: 1.0, note: "æ—¥éŸ“ä»¥å¤–åœ°å€å›é¥‹è¼ƒä½ã€‚éœ€æ‰£é™¤æµ·å¤–æ‰‹çºŒè²»ã€‚" }
                            ]
                        },
                        // ==========================================
                        // åŸæœ‰åœ‹å…§åº—å®¶
                        // ==========================================
                        {
                            name: "7-ELEVEN",
                            category: "åœ‹å…§è¶…å•†",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "å¯¦é«”å¡/ICASH/OpenéŒ¢åŒ…", rate: 3.0, note: "éœ€åˆ‡æ›æ¬Šç›Šè‡³[é›†ç²¾é¸]" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "éœ€ä½¿ç”¨å°æ–° Pay ç¶å®šä¸¦é¸å¤©å¤©åˆ·" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬æ¶ˆè²»", method: "Line Pay", rate: 1.0, note: "è¶…å•†éä¸€èˆ¬æ¶ˆè²»ï¼ŒJå¡å›é¥‹é€šå¸¸è¼ƒä½" }
                            ]
                        },
                        {
                            name: "å…¨å®¶ä¾¿åˆ©å•†åº—",
                            category: "åœ‹å…§è¶…å•†",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "å¯¦é«”å¡/My FamiPay", rate: 3.0, note: "éœ€åˆ‡æ›æ¬Šç›Šè‡³[é›†ç²¾é¸]" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "éœ€ä½¿ç”¨å°æ–° Pay ç¶å®š" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬æ¶ˆè²»", method: "Line Pay", rate: 1.0, note: "å›é¥‹æ¥µä½ï¼Œä¸å»ºè­°ä½¿ç”¨" }
                            ]
                        },
                        {
                            name: "Uniqlo",
                            category: "åœ‹å…§æœé£¾",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡/ä¸€èˆ¬åˆ·å¡", rate: 3.0, note: "éœ€åˆ‡æ›æ¬Šç›Šè‡³[æ¨‚é¥—è³¼]" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”å¡", rate: 3.8, note: "æŒ‡å®šç™¾è²¨Outletå…§å¯èƒ½ä¸é©ç”¨" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "å°ç£åº—é¢åƒ…ä¸€èˆ¬å›é¥‹" }
                            ]
                        },
                        {
                            name: "éº¥ç•¶å‹",
                            category: "åœ‹å…§é¤é£²",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬æ¶ˆè²»", method: "Line Pay", rate: 3.0, note: "éœ€ç¶å®š Line Pay" },
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³[é›†ç²¾é¸]" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "éæŒ‡å®šé€šè·¯ï¼Œå›é¥‹ä½" }
                            ]
                        },
                        {
                            name: "Uber Eats",
                            category: "åœ‹å…§å¤–é€",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "APP ç¶å®š", rate: 3.0, note: "éœ€åˆ‡æ›è‡³[æ¨‚é¥—è³¼]" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "APP ç¶å®š", rate: 3.8, note: "éœ€é¸å¤©å¤©åˆ·æ–¹æ¡ˆ" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "APP ç¶å®š", rate: 1.0, note: "ç„¡ç‰¹åˆ¥åŠ ç¢¼" }
                            ]
                        },
                        {
                            name: "å°ç£é«˜éµ",
                            category: "åœ‹å…§äº¤é€š",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å®˜ç¶²/APP", rate: 3.8, note: "éœ€é¸å¤©å¤©åˆ·æ–¹æ¡ˆ" },
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "å®˜ç¶²/APP", rate: 3.0, note: "éœ€åˆ‡æ›è‡³[è¶£æ—…è¡Œ]" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "APP", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹" }
                            ]
                        }
                    ]
                }
            },
            computed: {
                filteredMerchants() {
                    if (!this.searchQuery) return [];
                    const query = this.searchQuery.toLowerCase();
                    // æœå°‹é‚è¼¯ï¼šåŒæ™‚æœå°‹åº—åå’Œé¡åˆ¥ (é€™æ¨£æœ"åœ‹å¤–"ä¹Ÿèƒ½æ‰¾åˆ°)
                    return this.merchants.filter(m => 
                        m.name.toLowerCase().includes(query) || m.category.toLowerCase().includes(query)
                    );
                },
                sortedRewards() {
                    if (!this.selectedMerchant) return [];
                    return [...this.selectedMerchant.rewards].sort((a, b) => b.rate - a.rate);
                }
            },
            methods: {
                handleInput() { this.selectedMerchant = null; },
                quickSearch(term) { this.searchQuery = term; this.selectedMerchant = null; },
                selectMerchant(merchant) { this.selectedMerchant = merchant; },
                backToSearch() { this.selectedMerchant = null; },
                clearSearch() { this.searchQuery = ''; this.selectedMerchant = null; },
                
                // === æ¨£å¼è¼”åŠ©å‡½æ•¸ (èª¿æ•´ç‚ºæ›´é®®è±”ä»¥å°æ¯”å¥¶æ²¹èƒŒæ™¯) ===
                getCardColorClass(cardName) {
                    // é€™è£¡åªä¿ç•™å·¦å´é‚Šæ¡†é¡è‰²ï¼ŒèƒŒæ™¯ç•™ç™½ä»¥èå…¥å¥¶æ²¹ä¸»é¡Œ
                    if (cardName.includes("Cube")) return "border-l-green-500";
                    if (cardName.includes("å°æ–°")) return "border-l-rose-500";
                    if (cardName.includes("å¯Œé‚¦")) return "border-l-blue-500";
                    return "border-l-gray-300";
                },
                getTextColorClass(cardName) {
                    // å¡ç‰‡æ¨™é¡Œé¡è‰²åŠ æ·±
                    if (cardName.includes("Cube")) return "text-green-700";
                    if (cardName.includes("å°æ–°")) return "text-rose-700";
                    if (cardName.includes("å¯Œé‚¦")) return "text-blue-700";
                    return "text-gray-700";
                },
                getRateColorClass(cardName) {
                    // å›é¥‹æ•¸å­—é¡è‰²ï¼Œä½¿ç”¨æ›´é£½å’Œçš„é¡è‰²
                    if (cardName.includes("Cube")) return "text-green-600 drop-shadow-[0_1px_1px_rgba(34,197,94,0.2)]";
                    if (cardName.includes("å°æ–°")) return "text-rose-600 drop-shadow-[0_1px_1px_rgba(225,29,72,0.2)]";
                    if (cardName.includes("å¯Œé‚¦")) return "text-blue-600 drop-shadow-[0_1px_1px_rgba(59,130,246,0.2)]";
                    return "text-gray-600";
                },
                getMethodTagClass(method) {
                    // æ”¯ä»˜æ–¹å¼ Tag çš„é¡è‰²é‚è¼¯
                    if (method.includes("Line") || method.includes("Pay")) return "bg-green-100 text-green-800 border border-green-200";
                    if (method.includes("å¯¦é«”") && (method.includes("æ—¥") || method.includes("éŸ“"))) return "bg-blue-100 text-blue-800 border border-blue-200";
                    return "bg-orange-100 text-orange-800 border border-orange-200";
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
