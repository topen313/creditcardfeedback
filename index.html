<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¿¡ç”¨å¡å›é¥‹ç¥éšŠå‹ (æµ·é‡å¤§å…¨é…)</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --fresh-bg: #F8FAFC;
            --fresh-text: #334155;
        }
        
        body { 
            font-family: 'DM Sans', 'Noto Sans TC', sans-serif; 
            background-color: var(--fresh-bg); 
            color: var(--fresh-text);
            letter-spacing: 0.03em;
            height: 100dvh; 
            overflow: hidden;
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .fade-enter-active, .fade-leave-active { transition: opacity 0.25s ease, transform 0.25s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; transform: translateY(10px); }

        .rate-number { font-family: 'DM Sans', sans-serif; letter-spacing: -0.04em; }
    </style>
</head>
<body>

    <div id="app" class="flex flex-col h-[100dvh] max-w-md mx-auto bg-[var(--fresh-bg)] shadow-2xl relative">
        
        <header class="bg-white pt-6 pb-3 px-5 z-30 sticky top-0 border-b border-slate-100 shadow-[0_4px_15px_-10px_rgba(0,0,0,0.05)]">
            <h1 class="text-xl font-bold tracking-wide text-slate-800 flex items-center">
                <i class="fa-solid fa-credit-card text-teal-500 mr-2"></i>å›é¥‹æŸ¥è©¢
            </h1>
        </header>

        <div class="px-5 py-3 bg-white z-20 border-b border-slate-50">
            <div class="relative group">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-3.5 text-slate-400 group-focus-within:text-teal-500 transition-colors"></i>
                <input 
                    v-model="searchQuery" 
                    @input="handleInput"
                    type="text" 
                    placeholder="è¼¸å…¥é—œéµå­— (ä¾‹: Focus, æ–‡å…·, IKEA...)" 
                    class="w-full pl-11 pr-10 py-3 rounded-xl bg-slate-50 border border-slate-100 focus:bg-white focus:border-teal-200 focus:ring-2 focus:ring-teal-50 transition-all text-slate-700 outline-none placeholder-slate-400 text-base"
                >
                <button v-if="searchQuery" @click="clearSearch" class="absolute right-3 top-3.5 text-slate-300 p-1 hover:text-slate-500">
                    <i class="fa-solid fa-xmark text-lg"></i>
                </button>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto hide-scrollbar p-5 pb-32 relative z-0">
            
            <div v-if="!searchQuery && !selectedMerchant" class="mt-2">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 ml-1">Popular</h3>
                <div class="flex flex-wrap gap-2">
                    <button v-for="tag in popularSearches" @click="quickSearch(tag)" 
                            class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 text-sm font-medium hover:border-teal-400 hover:text-teal-600 transition-colors">
                        {{ tag }}
                    </button>
                </div>
            </div>

            <div v-if="searchQuery && !selectedMerchant" class="space-y-3">
                <div v-for="m in filteredMerchants" :key="m.name" @click="selectMerchant(m)" 
                     class="bg-white p-4 rounded-xl border border-slate-100 shadow-sm hover:border-teal-300 transition-all cursor-pointer flex justify-between items-center">
                    <div class="flex items-center gap-3 overflow-hidden">
                        <div class="w-10 h-10 rounded-lg flex-shrink-0 flex items-center justify-center text-lg" 
                             :class="getIconColor(m.category)">
                            <i :class="getIconClass(m.category)"></i>
                        </div>
                        <div class="min-w-0">
                            <span class="font-bold text-base text-slate-700 block truncate">{{ m.name }}</span>
                            <span class="text-xs text-slate-400 block truncate">{{ m.category }}</span>
                        </div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-slate-300 text-xs"></i>
                </div>
                
                <div v-if="filteredMerchants.length === 0" class="text-center mt-10 text-slate-400 text-sm">
                    <p>æ‰¾ä¸åˆ°ã€Œ{{searchQuery}}ã€çš„çµæœ<br>å»ºè­°è¼¸å…¥å“ç‰Œåç¨±æˆ–é¡åˆ¥</p>
                </div>
            </div>

            <transition name="fade">
                <div v-if="selectedMerchant">
                    <button @click="backToSearch" class="mb-4 flex items-center text-slate-500 hover:text-teal-600 transition text-sm font-medium">
                        <i class="fa-solid fa-arrow-left mr-2"></i> è¿”å›æœå°‹
                    </button>

                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-slate-800 break-words">{{ selectedMerchant.name }}</h2>
                        <span class="text-xs font-medium text-slate-400 bg-slate-100 px-2 py-0.5 rounded ml-0.5">{{ selectedMerchant.category }}</span>
                    </div>

                    <div class="space-y-4">
                        <div v-for="(card, index) in sortedRewards" :key="index" 
                             class="bg-white rounded-2xl p-5 shadow-[0_4px_20px_-4px_rgba(203,213,225,0.5)] border border-slate-100 relative overflow-hidden"
                             :class="{'ring-1 ring-yellow-400': index === 0}">
                            
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold text-lg flex items-center gap-2" :class="getTextColorClass(card.cardName)">
                                        {{ card.cardName }}
                                    </h3>
                                </div>
                                
                                <div class="flex flex-col items-end">
                                    <div v-if="index === 0" class="bg-yellow-100 text-yellow-700 text-[10px] font-bold px-2 py-0.5 rounded-full mb-1">
                                        <i class="fa-solid fa-crown mr-1"></i>BEST
                                    </div>
                                    <div class="rate-number text-4xl font-bold leading-none" :class="getRateColorClass(card.cardName)">
                                        {{ card.rate }}<span class="text-lg font-medium ml-0.5 text-slate-400">%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="h-px bg-slate-50 w-full mb-3"></div>

                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="px-3 py-1.5 rounded-lg text-xs font-medium bg-slate-50 text-slate-600 border border-slate-100">
                                    {{ card.plan }}
                                </span>
                                <span class="px-3 py-1.5 rounded-lg text-xs font-medium border" 
                                      :class="getMethodTagClass(card.method)">
                                    {{ card.method }}
                                </span>
                            </div>

                            <div v-if="card.note" class="flex items-start gap-1.5 text-xs text-slate-400 font-light leading-relaxed bg-slate-50/50 p-2 rounded-lg">
                                <i class="fa-solid fa-circle-info mt-0.5 text-slate-300 flex-shrink-0"></i>
                                <span class="break-words">{{ card.note }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>

        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    searchQuery: '',
                    selectedMerchant: null,
                    popularSearches: ['Focus', 'æ–‡å…·', 'é›»å½±', 'æ–°å…‰', 'æ—¥æœ¬', 'IKEA'],
                    
                    // ==========================================
                    // çµ‚æ¥µæµ·é‡è³‡æ–™åº«
                    // ==========================================
                    merchants: [
                        // --- æ–‡å…·èˆ‡åœ–æ›¸ (æ–°!) ---
                        {
                            name: "ä¹ä¹˜ä¹ / å¢Šè…³çŸ³ / å…‰å—",
                            category: "æ–‡å…·é›œè²¨",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "é€™é¡åº—å®¶é€šå¸¸ç„¡é«˜å›é¥‹ï¼ŒJå¡ç¶ Line Pay 1% æ˜¯å®‰å…¨ç‰Œã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "éç™¾è²¨å…§é–€å¸‚åƒ…ä¸€èˆ¬å›é¥‹ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "éæŒ‡å®šé€šè·¯ï¼Œåƒ…äº«åŸºç¤å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "åšå®¢ä¾† Books.com.tw",
                            category: "ç¶²è·¯æ›¸åº—",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "ç©æ•¸ä½", method: "ç·šä¸Šåˆ·å¡", rate: 3.0, note: "è«‹åˆ‡æ›è‡³ [ç©æ•¸ä½]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ç·šä¸Šåˆ·å¡", rate: 1.0, note: "ä¸€èˆ¬ç¶²è³¼å›é¥‹ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "ç·šä¸Šåˆ·å¡", rate: 0.3, note: "éå¤©å¤©åˆ·æŒ‡å®šé€šè·¯ã€‚" }
                            ]
                        },
                        {
                            name: "èª å“æ›¸åº— / èª å“ç”Ÿæ´»",
                            category: "ç™¾è²¨æ›¸åº—",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0.3, note: "èª å“ä¸åœ¨å¤©å¤©åˆ·åˆ—è¡¨ (é™¤éä½¿ç”¨å°æ–°Payä¸”ä½æ–¼ç™¾è²¨å…§)ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },

                        // --- 3C å®¶é›» (æ–°!) ---
                        {
                            name: "ç‡¦å¤ / å…¨åœ‹é›»å­",
                            category: "3Cå®¶é›»",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "æ³¨æ„ï¼šéœ€ç¶å®šå°æ–°Payæ‰äº«æœ‰3.8%ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "é›»å™¨è³£å ´é€šå¸¸ç„¡ç‰¹åˆ¥åŠ ç¢¼ (é™¤éæœ‰æœŸé–“é™å®šæ´»å‹•)ã€‚" }
                            ]
                        },
                        {
                            name: "Apple ç›´ç‡Ÿ / å®˜ç¶²",
                            category: "3Cå®¶é›»",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ (è‹¥å®˜ç¶²åˆ·å¡å¯èƒ½ç‚º1%)ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "ç©æ•¸ä½", method: "Apple Pay", rate: 0.3, note: "æ³¨æ„ï¼šAppleç›´ç‡Ÿåº—è¢«æ’é™¤åœ¨ç©æ•¸ä½ä¹‹å¤–ï¼Œåƒ…0.3%ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0.3, note: "ç„¡ç‰¹åˆ¥å›é¥‹ã€‚" }
                            ]
                        },

                        // --- å®¶å±…å‚¢ä¿± (æ–°!) ---
                        {
                            name: "IKEA å®œå®¶å®¶å±…",
                            category: "å®¶å±…å‚¢ä¿±",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "éœ€ç¶å®šå°æ–°Payã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "æ³¨æ„ï¼šIKEA é›–ç„¶æ˜¯å®¶å±…ï¼Œä½†éƒ¨åˆ†åˆ†åº—é©ç”¨æ¨‚é¥—è³¼(éœ€ç¢ºèªMCC)ï¼Œä¸ç¢ºå®šæ™‚å»ºè­°åˆ·å°æ–°ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "ç‰¹åŠ›å±‹ / HOLA",
                            category: "å®¶å±…å‚¢ä¿±",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "éœ€ç¶å®šå°æ–°Payã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "é€šå¸¸ä¸åˆ—å…¥æ¨‚é¥—è³¼ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "Nitori å®œå¾—åˆ©",
                            category: "å®¶å±…å‚¢ä¿±",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "è‹¥ä½æ–¼ç™¾è²¨å…¬å¸å…§(å¦‚SOGOåº—)é©ç”¨æ¨‚é¥—è³¼ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0.3, note: "éæŒ‡å®šé€šè·¯ã€‚" }
                            ]
                        },

                        // --- å¨›æ¨‚é›»å½± (æ–°!) ---
                        {
                            name: "å¨ç§€å½±åŸ / åœ‹è³“ / ç§€æ³°",
                            category: "é›»å½±å¨›æ¨‚",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”/å®˜ç¶²", rate: 3.8, note: "æŒ‡å®šå½±åŸäº«å¤©å¤©åˆ·å›é¥‹ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "é›»å½±é™¢ç„¡ç‰¹åˆ¥æ¬Šç›Šã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "éŒ¢æ«ƒ / å¥½æ¨‚è¿ª / æ˜Ÿèšé»",
                            category: "KTVå¨›æ¨‚",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”", rate: 3.8, note: "æŒ‡å®šKTVäº«å¤©å¤©åˆ·å›é¥‹ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”", rate: 3.0, note: "éƒ¨åˆ†KTVé©ç”¨æ¨‚é¥—è³¼ (è¦–è¡Œæ¥­ä»£ç¢¼è€Œå®š)ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },

                        // --- ç™¾è²¨ (å«Focus) ---
                        {
                            name: "Focus æ™‚å°šæµè¡Œé¤¨ (å°å—)",
                            category: "ç™¾è²¨å…¬å¸",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "æ¨‚é¥—è³¼æ¶µè“‹å¤§å¤šæ•¸ç™¾è²¨å…¬å¸ï¼ŒFocus é©ç”¨æ©Ÿç‡é«˜ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ç¶å®š Line Pay æ”¯ä»˜ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”/Pay", rate: 0.3, note: "Focus ä¸åœ¨å°æ–°å¤©å¤©åˆ·çš„ã€ŒæŒ‡å®šç™¾è²¨ã€æ¸…å–®ä¸­ï¼Œå›é¥‹ä½ã€‚" }
                            ]
                        },
                        {
                            name: "æ–°å…‰ä¸‰è¶Š / SOGO / é æ±ç™¾è²¨",
                            category: "ç™¾è²¨å…¬å¸",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "æ³¨æ„ï¼šå¿…é ˆç¶å®šã€Œå°æ–°Payã€æ”¯ä»˜ï¼Œåˆ·å¯¦é«”å¡åƒ… 0.3%ï¼" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡/Pay", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "å°åŒ—101 / å¾®é¢¨ / äº¬ç«™",
                            category: "ç™¾è²¨å…¬å¸",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "å¿…é ˆç¶å®šã€Œå°æ–°Payã€ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "æ¼¢ç¥ç™¾è²¨ / å¤¢æ™‚ä»£ / å·¨åŸ",
                            category: "ç™¾è²¨å…¬å¸",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "å¿…é ˆç¶å®šã€Œå°æ–°Payã€ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "Lalaport / ä¸‰äº• Outlet",
                            category: "ç™¾è²¨å…¬å¸",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–° Pay", rate: 3.8, note: "å¿…é ˆç¶å®šã€Œå°æ–°Payã€ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },

                        // --- è—¥å¦ ---
                        {
                            name: "å±ˆè‡£æ° / åº·æ˜¯ç¾ / å¯¶é›…",
                            category: "è—¥å¦åº—",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0.3, note: "éæŒ‡å®šé€šè·¯ã€‚" }
                            ]
                        },

                        // --- åœ‹å¤–/æ—…éŠ ---
                        {
                            name: "ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡· æ—¥æœ¬/éŸ“åœ‹ (å¯¦é«”)",
                            category: "åœ‹å¤–æ—…éŠ",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "æ—¥éŸ“æ—…éŠ", method: "ç•¶åœ°å¯¦é«”", rate: 3.0, note: "éœ€å¯¦é«”åˆ·å¡ã€‚ç¶å®š Pay æˆ–å„²å€¼äº¤é€šå¡å¯èƒ½ç„¡å›é¥‹ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ› [è¶£æ—…è¡Œ]ã€‚éœ€æ‰£é™¤1.5%æ‰‹çºŒè²»ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "æµ·å¤–", method: "å¯¦é«”å¡", rate: 2.5, note: "éœ€æ‰£é™¤æ‰‹çºŒè²»ã€‚" }
                            ]
                        },
                        {
                            name: "ğŸŒ åœ‹å¤–ä¸€èˆ¬ (æ­ç¾/ç¶²è³¼)",
                            category: "åœ‹å¤–æ—…éŠ",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "ä¸é™", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [è¶£æ—…è¡Œ]ã€‚å«åœ‹å¤–ç¶²ç«™ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "æµ·å¤–", method: "ä¸é™", rate: 2.5, note: "éœ€æ‰£é™¤æµ·å¤–æ‰‹çºŒè²»ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸é™", rate: 1.0, note: "æ—¥éŸ“ä»¥å¤–å›é¥‹è¼ƒä½ã€‚" }
                            ]
                        },
                        {
                            name: "å°ç£é«˜éµ / å°éµ",
                            category: "äº¤é€šé‹è¼¸",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å®˜ç¶²/APP", rate: 3.8, note: "éœ€é¸å¤©å¤©åˆ·æ–¹æ¡ˆã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "å®˜ç¶²/APP", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [è¶£æ—…è¡Œ]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "APP", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "CPC å°ç£ä¸­æ²¹ (ç›´ç‡Ÿ)",
                            category: "åŠ æ²¹äº¤é€š",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”/å°æ–°Pay", rate: 3.8, note: "éœ€é¸å¤©å¤©åˆ·æ–¹æ¡ˆã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [é›†ç²¾é¸]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "éœ€è©²ç«™é»æ”¯æ´ Line Payã€‚" }
                            ]
                        },
                        {
                            name: "Uber / å°ç£å¤§è»ŠéšŠ / yoxi",
                            category: "äº¤é€šè¨ˆç¨‹è»Š",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "è¶£æ—…è¡Œ", method: "APPç¶å®š", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [è¶£æ—…è¡Œ]ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "APPç¶å®š", rate: 3.8, note: "åƒ…é™æŒ‡å®šè»ŠéšŠ(å¦‚Uber/55688)ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "APPç¶å®š", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },

                        // --- ç¶²è³¼ ---
                        {
                            name: "Shopee è¦çš®è³¼ç‰©",
                            category: "ç¶²è³¼å¹³å°",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "ç©æ•¸ä½", method: "ä¸€èˆ¬åˆ·å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [ç©æ•¸ä½]ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "ä¸€èˆ¬åˆ·å¡", rate: 3.8, note: "éœ€ç¬¦åˆå¤©å¤©åˆ·æ¢ä»¶ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 1.0, note: "ç„¡ç‰¹åˆ¥åŠ ç¢¼ã€‚" }
                            ]
                        },
                        {
                            name: "momo è³¼ç‰©ç¶²",
                            category: "ç¶²è³¼å¹³å°",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "ç©æ•¸ä½", method: "ä¸€èˆ¬åˆ·å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [ç©æ•¸ä½]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "momoå¡", rate: 1.0, note: "å»ºè­°ä½¿ç”¨ momo è¯åå¡ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "ä¸€èˆ¬åˆ·å¡", rate: 0.3, note: "momo ä¸åœ¨å¤©å¤©åˆ·æŒ‡å®šåå–®ä¸­ã€‚" }
                            ]
                        },

                        // --- é¤é£²/è¶…å•† ---
                        {
                            name: "7-ELEVEN / å…¨å®¶",
                            category: "ä¾¿åˆ©å•†åº—",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å°æ–°Pay", rate: 3.8, note: "å¿…é ˆç¶å®šå°æ–° Payã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "Open/Fami", rate: 3.0, note: "åˆ‡æ› [é›†ç²¾é¸]ã€‚ç¶å®šæŒ‡å®šéŒ¢åŒ…ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "å›é¥‹è¼ƒä½ã€‚" }
                            ]
                        },
                        {
                            name: "Starbucks / è·¯æ˜“è",
                            category: "é¤é£²å’–å•¡",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”/APP", rate: 3.8, note: "åˆ—å…¥å¤©å¤©åˆ·æŒ‡å®šé€šè·¯ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”/APP", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 3.0, note: "Jå¡éƒ¨åˆ†é¤é£²æœ‰åŠ ç¢¼ï¼Œéœ€ç¶ Line Payã€‚" }
                            ]
                        },
                        {
                            name: "éº¥ç•¶å‹ /è‚¯å¾·åŸº / æ‘©æ–¯",
                            category: "é€Ÿé£Ÿé¤é£²",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 3.0, note: "éœ€ç¶å®š Line Payã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "å¯¦é«”å¡", rate: 3.0, note: "éœ€åˆ‡æ›è‡³ [é›†ç²¾é¸] (åƒ…é™éº¥ç•¶å‹)ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”å¡", rate: 0.3, note: "éæŒ‡å®šé€šè·¯ã€‚" }
                            ]
                        },
                        {
                            name: "Uber Eats / Foodpanda",
                            category: "å¤–é€å¹³å°",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "APPç¶å®š", rate: 3.8, note: "å¤©å¤©åˆ·æŒ‡å®šé€šè·¯ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "APPç¶å®š", rate: 3.0, note: "åˆ‡æ› [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "APPç¶å®š", rate: 1.0, note: "ç„¡ç‰¹åˆ¥åŠ ç¢¼ã€‚" }
                            ]
                        },
                        {
                            name: "Uniqlo / GU / ZARA",
                            category: "ç”Ÿæ´»æœé£¾",
                            rewards: [
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "å¤©å¤©åˆ·", method: "å¯¦é«”", rate: 3.8, note: "å¤©å¤©åˆ·æŒ‡å®šé€šè·¯ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "æ¨‚é¥—è³¼", method: "å¯¦é«”", rate: 3.0, note: "åˆ‡æ› [æ¨‚é¥—è³¼]ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "Line Pay", rate: 1.0, note: "ä¸€èˆ¬å›é¥‹ã€‚" }
                            ]
                        },
                        
                        // --- é‡è²© ---
                        {
                            name: "PX Mart å…¨è¯ç¦åˆ©ä¸­å¿ƒ",
                            category: "è¶…å¸‚é‡è²©",
                            rewards: [
                                { cardName: "åœ‹æ³° Cube", plan: "é›†ç²¾é¸", method: "PX Pay", rate: 0, note: "æ³¨æ„ï¼šCube å¡å…¨è¯å·²å–æ¶ˆé«˜å›é¥‹ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0, note: "å…¨è¯å¤§å¤šä¸åˆ—å…¥å›é¥‹ã€‚" },
                                { cardName: "å¯Œé‚¦ J å¡", plan: "ä¸€èˆ¬", method: "å¯¦é«”", rate: 0, note: "å…¨è¯ä¸åˆ—å…¥å›é¥‹ã€‚" }
                            ]
                        },
                        {
                            name: "Costco å¥½å¸‚å¤š",
                            category: "è¶…å¸‚é‡è²©",
                            rewards: [
                                { cardName: "å¯Œé‚¦ J å¡", plan: "X", method: "X", rate: 0, note: "åƒ…é™å¯Œé‚¦ Costco è¯åå¡ã€‚" },
                                { cardName: "åœ‹æ³° Cube", plan: "X", method: "X", rate: 0, note: "åƒ…é™å¯Œé‚¦ Costco è¯åå¡ã€‚" },
                                { cardName: "å°æ–°ç«ç‘°å¤ªé™½", plan: "X", method: "X", rate: 0, note: "åƒ…é™å¯Œé‚¦ Costco è¯åå¡ã€‚" }
                            ]
                        }
                    ]
                }
            },
            computed: {
                filteredMerchants() {
                    if (!this.searchQuery) return [];
                    const query = this.searchQuery.toLowerCase();
                    return this.merchants.filter(m => 
                        m.name.toLowerCase().includes(query) || m.category.toLowerCase().includes(query)
                    );
                },
                sortedRewards() {
                    if (!this.selectedMerchant) return [];
                    return [...this.selectedMerchant.rewards].sort((a, b) => b.rate - a.rate);
                }
            },
            methods: {
                handleInput() { this.selectedMerchant = null; },
                quickSearch(term) { this.searchQuery = term; this.selectedMerchant = null; },
                selectMerchant(merchant) { this.selectedMerchant = merchant; },
                backToSearch() { this.selectedMerchant = null; },
                clearSearch() { this.searchQuery = ''; this.selectedMerchant = null; },
                
                getIconClass(category) {
                    if (category.includes('åœ‹å¤–') || category.includes('æ—…éŠ')) return 'fa-solid fa-plane';
                    if (category.includes('ç¶²è³¼') || category.includes('æ›¸') || category.includes('3C')) return 'fa-solid fa-laptop';
                    if (category.includes('æ–‡å…·')) return 'fa-solid fa-pen-ruler';
                    if (category.includes('å®¶å±…')) return 'fa-solid fa-couch';
                    if (category.includes('å¨›æ¨‚') || category.includes('é›»å½±') || category.includes('KTV')) return 'fa-solid fa-film';
                    if (category.includes('è¶…å¸‚') || category.includes('ç™¾è²¨') || category.includes('è—¥å¦')) return 'fa-solid fa-bag-shopping';
                    if (category.includes('é¤é£²') || category.includes('å’–å•¡')) return 'fa-solid fa-mug-hot';
                    if (category.includes('äº¤é€š') || category.includes('åŠ æ²¹')) return 'fa-solid fa-train-subway';
                    return 'fa-solid fa-store';
                },
                getIconColor(category) {
                    if (category.includes('åœ‹å¤–')) return 'bg-blue-50 text-blue-500';
                    if (category.includes('ç™¾è²¨')) return 'bg-purple-50 text-purple-500';
                    if (category.includes('æ›¸') || category.includes('æ–‡å…·')) return 'bg-amber-50 text-amber-600';
                    if (category.includes('å¨›æ¨‚')) return 'bg-pink-50 text-pink-500';
                    if (category.includes('é¤é£²')) return 'bg-orange-50 text-orange-500';
                    if (category.includes('è¶…å¸‚')) return 'bg-green-50 text-green-500';
                    return 'bg-slate-100 text-slate-500';
                },
                getTextColorClass(cardName) {
                    if (cardName.includes("Cube")) return "text-emerald-600";
                    if (cardName.includes("å°æ–°")) return "text-rose-500";
                    if (cardName.includes("å¯Œé‚¦")) return "text-blue-500";
                    return "text-slate-600";
                },
                getRateColorClass(cardName) {
                    if (cardName.includes("Cube")) return "text-emerald-500";
                    if (cardName.includes("å°æ–°")) return "text-rose-500";
                    if (cardName.includes("å¯Œé‚¦")) return "text-blue-500";
                    return "text-slate-400";
                },
                getMethodTagClass(method) {
                    if (method.includes("Line") || method.includes("Pay")) return "bg-green-50 text-green-600 border-green-100";
                    if (method === "X") return "bg-red-50 text-red-500 border-red-100";
                    if (method.includes("å¯¦é«”") && (method.includes("æ—¥") || method.includes("éŸ“"))) return "bg-blue-50 text-blue-600 border-blue-100";
                    return "bg-slate-50 text-slate-500 border-slate-200";
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
